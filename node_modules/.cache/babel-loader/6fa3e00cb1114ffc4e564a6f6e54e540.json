{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kel Den\\\\Desktop\\\\GameSearch\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport GameCard from \"./GameCard\";\nimport { Jumbotron, Alert, Container, Row, Col, Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport Swal from 'sweetalert2';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.toggle = () => {\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      let timerInterval;\n      Swal.fire({\n        title: 'Searching in process, please eait',\n        timer: 2000,\n        timerProgressBar: true,\n        onBeforeOpen: () => {\n          Swal.showLoading();\n        },\n        onClose: () => {\n          clearInterval(timerInterval);\n        }\n      }).then(result => {\n        if (\n        /* Read more about handling dismissals below */\n        result.dismiss === Swal.DismissReason.timer) {\n          console.log('I was closed by the timer'); // eslint-disable-line\n        }\n      });\n      this.setState({\n        alertVisible: false\n      });\n      const query = \"/create?name=\".concat(this.state.title);\n      axios.get(query).then(result => {\n        console.log(result.data);\n\n        if (result.data === 'Not found') {\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops...',\n            text: 'Game is not found'\n          });\n        } else if (result.data === 'This game already exist in the database') {\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops...',\n            text: result.data,\n            footer: \"Try to use the search tools below\"\n          });\n        }\n\n        this.getAllMovies();\n      }).catch(error => {\n        console.error(error);\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: error\n        });\n      });\n      this.toggle();\n    };\n\n    this.onFindGame = e => {\n      e.preventDefault();\n      this.setState({\n        alertVisible: false\n      });\n\n      if (e.target.value == \"\") {\n        this.getAllMovies();\n      } else {\n        const query = \"/findgame?name=\".concat(e.target.value);\n        axios.get(query).then(result => {\n          this.setState({\n            movies: result.data\n          });\n          console.log(result.data);\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.getAllMovies = () => {\n      axios.get(\"/games\").then(result => {\n        this.setState({\n          movies: result.data\n        });\n        console.log(this.state.movies);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.deleteRecord = value => {\n      console.log(\"to delete: \", value);\n      const query = \"/delete?id=\".concat(value);\n      axios.get(query).then(result => {\n        this.getAllMovies();\n      }).catch(error => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: error\n        });\n      });\n    };\n\n    this.editRecord = (id, value, genres) => {\n      const query = \"/update?id=\".concat(id, \"&text=\").concat(value, \"&genres=\").concat(genres);\n      console.log(query);\n      axios.get(query).then(result => {\n        this.getAllMovies();\n        console.log(\"updated\");\n      }).catch(error => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: error\n        });\n      });\n    };\n\n    this.state = {\n      alertVisible: false,\n      title: '',\n      movies: [{\n        cover: '',\n        name: 'hello',\n        id: 1\n      }],\n      modal: false,\n      currentPage: 1,\n      todosPerPage: 3\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onFindGame = this.onFindGame.bind(this);\n    this.onDismiss = this.onDismiss.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  //for popup\n  onDismiss() {\n    this.setState({\n      alertVisible: false\n    });\n  } //for form\n\n\n  // for form field\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  componentDidMount() {\n    this.getAllMovies();\n  }\n\n  handleClick(event) {\n    this.setState({\n      currentPage: Number(event.target.id)\n    });\n  } //https://www.codementor.io/blizzerand/building-forms-using-react-everything-you-need-to-know-iz3eyoq4y\n  //todo add buttons to delete rows\n  //https://codepen.io/aaronschwartz/pen/awOyQq?editors=0010\n  //https://github.com/react-tools/react-table/issues/324\n\n\n  render() {\n    const _this$state = this.state,\n          movies = _this$state.movies,\n          currentPage = _this$state.currentPage,\n          todosPerPage = _this$state.todosPerPage; // Logic for displaying todos\n\n    const indexOfLastTodo = currentPage * todosPerPage;\n    const indexOfFirstTodo = indexOfLastTodo - todosPerPage;\n    const currentTodos = movies.slice(indexOfFirstTodo, indexOfLastTodo);\n    const renderTodos = currentTodos.map((movies, index) => {\n      return React.createElement(Col, {\n        xs: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(GameCard, {\n        removeGame: this.deleteRecord.bind(this),\n        editGame: this.editRecord.bind(this),\n        games: movies,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }));\n    }); // Logic for displaying page numbers\n\n    const pageNumbers = [];\n\n    for (let i = 1; i <= Math.ceil(movies.length / todosPerPage); i++) {\n      pageNumbers.push(i);\n    }\n\n    const renderPageNumbers = pageNumbers.map(number => {\n      return React.createElement(\"li\", {\n        class: \"list-group-item list-group-item-action\",\n        key: number,\n        id: number,\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, number);\n    });\n\n    function HasGame() {\n      if (movies.length == 0) {\n        return React.createElement(\"div\", {\n          class: \"noGameDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"http://pm1.narvii.com/6688/d91c5f2917fe35c3862d2b2a8a2fc91c89e16450_00.jpg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        }, \"No result is found\"));\n      }\n\n      return React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Jumbotron, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"display-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Game Search\"), React.createElement(\"hr\", {\n      className: \"my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"lead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, \"Search for game\"), React.createElement(Col, {\n      sm: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"info\",\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, \"Request new game\"), React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.toggle,\n      className: \"modaltest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Game is not in the menu? \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Request Now\")), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Label, {\n      for: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \" Request New Game to View\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"title\",\n      id: \"title\",\n      placeholder: \"Please Enter the Game's Name\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    })), React.createElement(Button, {\n      color: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"Submit\"))))))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      color: \"danger\",\n      isOpen: this.state.alertVisible,\n      toggle: this.onDismiss,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Game is either existed or not found! Please try again\"))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"text\",\n      name: \"title\",\n      id: \"findGame\",\n      placeholder: \"Look For a Game (Below)\",\n      onChange: this.onFindGame,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(HasGame, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"pagitems\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      class: \"list-group list-group-horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, renderTodos)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      class: \"list-group list-group-horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, renderPageNumbers)))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Kel Den\\Desktop\\GameSearch\\client\\src\\App.js"],"names":["React","Component","axios","GameCard","Jumbotron","Alert","Container","Row","Col","Button","Form","FormGroup","Label","Input","Modal","ModalHeader","ModalBody","Swal","App","constructor","toggle","setState","modal","state","onSubmit","e","preventDefault","timerInterval","fire","title","timer","timerProgressBar","onBeforeOpen","showLoading","onClose","clearInterval","then","result","dismiss","DismissReason","console","log","alertVisible","query","get","data","icon","text","footer","getAllMovies","catch","error","onFindGame","target","value","movies","err","deleteRecord","editRecord","id","genres","cover","name","currentPage","todosPerPage","onChange","bind","onDismiss","handleClick","componentDidMount","event","Number","render","indexOfLastTodo","indexOfFirstTodo","currentTodos","slice","renderTodos","map","index","pageNumbers","i","Math","ceil","length","push","renderPageNumbers","number","HasGame"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport GameCard from \"./GameCard\";\nimport {\n    Jumbotron,\n    Alert,\n    Container,\n    Row,\n    Col,\n    Button,\n    Form,\n    FormGroup,\n    Label,\n    Input,\n    Modal,\n    ModalHeader,\n    ModalBody\n} from 'reactstrap';\nimport Swal from 'sweetalert2';\n\nclass App extends Component {\n    constructor() {\n        super();\n        this.state = {\n            alertVisible: false,\n            title: '',\n            movies: [{ cover: '', name: 'hello', id: 1 }],\n            modal: false,\n            currentPage: 1,\n            todosPerPage: 3\n        };\n\n        this.onChange = this.onChange.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onFindGame = this.onFindGame.bind(this);\n        this.onDismiss = this.onDismiss.bind(this);\n        this.toggle = this.toggle.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    toggle = () => {\n        this.setState({\n            modal: !this.state.modal\n        });\n    }\n\n    //for popup\n    onDismiss() {\n        this.setState({ alertVisible: false });\n    }\n\n    //for form\n    onSubmit = e => {\n        e.preventDefault();\n        let timerInterval\n        Swal.fire({\n        title: 'Searching in process, please eait',\n        timer: 2000,\n        timerProgressBar: true,\n        onBeforeOpen: () => {\n            Swal.showLoading()\n        },\n        onClose: () => {\n            clearInterval(timerInterval)\n        }\n        }).then((result) => {\n        if (\n            /* Read more about handling dismissals below */\n            result.dismiss === Swal.DismissReason.timer\n        ) {\n            console.log('I was closed by the timer') // eslint-disable-line\n        }\n        })\n        this.setState({ alertVisible: false });\n        const query = `/create?name=${this.state.title}`;\n        axios.get(query)\n        .then(result => {\n            console.log(result.data);\n            if (result.data === 'Not found') {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Oops...',\n                    text: 'Game is not found',\n                  })\n\n            } else if (result.data === 'This game already exist in the database') {\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Oops...',\n                    text: result.data,\n                    footer: \"Try to use the search tools below\"\n                  })\n            }this.getAllMovies();\n        }).catch(error => {\n            console.error(error);\n            Swal.fire({\n                icon: 'error',\n                title: 'Oops...',\n                text: error,\n            })\n        });\n        this.toggle();\n    };\n\n    onFindGame = e => {\n        e.preventDefault();\n        this.setState({ alertVisible: false });\n        if (e.target.value == \"\") {\n            this.getAllMovies();\n        } \n        else {\n            const query = `/findgame?name=${e.target.value}`;\n            axios.get(query).then(result => {\n                this.setState({ movies: result.data });\n                console.log(result.data);\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n    }\n\n    // for form field\n    onChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n\n    getAllMovies = () => {\n        axios.get(\"/games\").then(result => {\n            this.setState({ movies: result.data });\n            console.log(this.state.movies);\n        }).catch(error => {\n            console.log(error);\n        });\n    };\n\n    componentDidMount() {\n        this.getAllMovies();\n    }\n\n    deleteRecord = value => {\n        console.log(\"to delete: \", value);\n        const query = `/delete?id=${value}`;\n        axios.get(query).then(result => {\n            this.getAllMovies();\n        }).catch(error => {\n            Swal.fire({\n                icon: 'error',\n                title: 'Oops...',\n                text: error,\n            })\n        });\n    };\n\n    editRecord = (id, value, genres) => {\n        const query = `/update?id=${id}&text=${value}&genres=${genres}`;\n        console.log(query);\n        axios.get(query).then(result => {\n            this.getAllMovies();\n            console.log(\"updated\");\n        }).catch(error => {\n            Swal.fire({\n                icon: 'error',\n                title: 'Oops...',\n                text: error,\n            })\n        });\n    };\n\n    handleClick(event) {\n        this.setState({\n            currentPage: Number(event.target.id)\n        });\n    }\n\n    //https://www.codementor.io/blizzerand/building-forms-using-react-everything-you-need-to-know-iz3eyoq4y\n    //todo add buttons to delete rows\n    //https://codepen.io/aaronschwartz/pen/awOyQq?editors=0010\n    //https://github.com/react-tools/react-table/issues/324\n    render() {\n\n        const { movies, currentPage, todosPerPage } = this.state;\n\n        // Logic for displaying todos\n        const indexOfLastTodo = currentPage * todosPerPage;\n        const indexOfFirstTodo = indexOfLastTodo - todosPerPage;\n        const currentTodos = movies.slice(indexOfFirstTodo, indexOfLastTodo);\n\n        const renderTodos = currentTodos.map((movies, index) => {\n            return (\n                <Col xs=\"4\">\n                    <GameCard\n                        removeGame={this.deleteRecord.bind(this)}\n                        editGame={this.editRecord.bind(this)}\n                        games={movies}\n                    />\n                </Col>\n\n            );\n        });\n\n        // Logic for displaying page numbers\n        const pageNumbers = [];\n        for (let i = 1; i <= Math.ceil(movies.length / todosPerPage); i++) {\n            pageNumbers.push(i);\n        }\n\n        const renderPageNumbers = pageNumbers.map(number => {\n            return (\n                <li class=\"list-group-item list-group-item-action\"\n                    key={number}\n                    id={number}\n                    onClick={this.handleClick}\n                >\n                    {number}\n                </li>\n            );\n        });\n\n        function HasGame(){\n            if(movies.length == 0){\n                return(\n                    <div class=\"noGameDiv\">\n                        <img src=\"http://pm1.narvii.com/6688/d91c5f2917fe35c3862d2b2a8a2fc91c89e16450_00.jpg\">\n                        </img>\n                        <p>No result is found</p>\n                    </div>\n                );\n            }\n            return(<br></br>);\n        }\n\n        return (\n            <div className=\"App\">\n                <Container>\n                    <Jumbotron>\n                        <h1 className=\"display-5\">Game Search</h1>\n                        <hr className=\"my-3\"/>\n                        <p className=\"lead\">Search for game</p>\n                        <Col sm=\"12\">\n                            <div>\n                                <Button color=\"info\" onClick={this.toggle}>Request new game</Button>\n                                <Modal isOpen={this.state.modal} toggle={this.toggle} className=\"modaltest\">\n                                    <ModalHeader toggle={this.toggle}>Game is not in the menu? <b>Request Now</b></ModalHeader>\n                                    <ModalBody>\n                                        <Form onSubmit={this.onSubmit}>\n                                            <FormGroup>\n                                                <Label for=\"title\"> Request New Game to View</Label>\n                                                <Input\n                                                    type=\"text\"\n                                                    name=\"title\"\n                                                    id=\"title\"\n                                                    placeholder=\"Please Enter the Game's Name\"\n                                                    onChange={this.onChange}\n                                                />\n                                            </FormGroup>\n                                            <Button color=\"success\">Submit</Button>\n                                        </Form>\n                                    </ModalBody>\n                                </Modal>\n                            </div>\n                        </Col>\n                    </Jumbotron>\n                    <Row>\n                        <Col>\n                            <Alert\n                                color=\"danger\"\n                                isOpen={this.state.alertVisible}\n                                toggle={this.onDismiss}\n                            >\n                                Game is either existed or not found! Please try again\n                            </Alert>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col sm=\"12\">\n                            <Input\n                                type=\"text\"\n                                name=\"title\"\n                                id=\"findGame\"\n                                placeholder=\"Look For a Game (Below)\"\n                                onChange={this.onFindGame}\n                            />\n                        </Col>\n                    </Row>\n                    <Row>\n                        <HasGame></HasGame>\n                        <div class=\"pagitems\">\n                            <ul class=\"list-group list-group-horizontal\">\n                                <Row>\n                                    {renderTodos}\n                                </Row>\n                            </ul>\n                            <hr/>\n                            <ul class=\"list-group list-group-horizontal\">\n                                {renderPageNumbers}\n                            </ul>\n                        </div>\n                    </Row>\n                </Container>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}